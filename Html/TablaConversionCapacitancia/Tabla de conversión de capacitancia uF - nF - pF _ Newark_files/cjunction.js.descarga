//>>built
require([],function(){if(mk.tagging.vendors.cjunction){(function(e){var t={set:function(e,t,i){var a=new Date,o=new Date;null!=i&&0!=i||(i=1),o.setTime(a.getTime()+864e5*i),document.cookie=e+"="+escape(t)+";expires="+o.toGMTString()+"; path=/"},get:function(e){var t=" "+document.cookie,i=t.indexOf(" "+e+"=");if(-1==i&&(i=t.indexOf(";"+e+"=")),-1==i||""==e)return"";var a=t.indexOf(";",i+1);return-1==a&&(a=t.length),unescape(t.substring(i+e.length+2,a))}};try{if(pf.tagging.tog.omniture){var i=window.location.href,a=i.substring(i.indexOf("?")+1,i.length),o=dojo.queryToObject(a),n=t.get("CommissionJunctionVoucher");if("source"in o?"CJ"===o.source&&t.set("CommissionJunction","yes",7):"SOURCE"in o&&"CJ"===o.SOURCE&&t.set("CommissionJunction","yes",7),"cjevent"in o&&t.set("cjevent",o.cjevent,365),"Checkout:Order Review"===pf.tagging.data.omniture.pageName){var r=dojo.query(".voucherName","summaryTotals").text().trim();/^AFF01|NEW18/.test(r)&&(n||t.set("CommissionJunctionVoucher",r,7))}else if("Checkout:Order Confirmation"===pf.tagging.data.omniture.pageName){var s=t.get("CommissionJunction"),l=t.get("cjevent");if(null!=s&&0!=s.length&&"yes"==s.trim()||/^AFF01|NEW18/.test(n)){for(var d=pf.tagging.data.omniture.products.replace(/^;|event.*|,/g,"").replace(/;$/g,""),h=d.split(";"),c="&OID="+pf.tagging.data.omniture.purchaseID,u=0,m=1;u<h.length;){var f=h[u];if(c+="&ITEM"+m+"="+f+"&",u+1<=h.length){var p=h[u+1];c+="QTY"+m+"="+p+"&"}if(u+2<=h.length){var g=h[u+2];c+="AMT"+m+"="+g/p}u+=3,m++}var y="";n&&(y="&COUPON="+n);var v="";l&&(v="&CJEVENT="+l);var b=dojo.byId("bodyContainer"),x=dojo.create("div",{id:e.containerTagId},b,"last"),_="https://www.emjcd.com/tags/c?containerTagId="+e.containerTagId+"&CID="+e.CID+"&TYPE="+e.TYPE+y+"&CURRENCY="+e.CURRENCY+c+v,k='<iframe height="1" width="1" frameborder="0" scrolling="no" src="'+_+'" name="cj_conversion" id="'+e.iFrameId+'" />';dojo.place(k,x,"first"),t.set("CommissionJunction","yes",-1),t.set("CommissionJunctionVoucher",n,-1)}else dojo.destroy(e.iFrameId),null!==dojo.byId(e.containerTagId)&&dojo.destroy(e.containerTagId)}}}catch(e){}})(mk.tagging.vendors.cjunction)}});//# sourceMappingURL=cjunction.js.map